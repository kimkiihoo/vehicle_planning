# 算法原理介绍

本项目实现了一个非结构化环境下的车辆轨迹规划与优化系统。主要包含两个阶段：
1.  **初值规划**：使用 **改进的混合 A* (Hybrid A*)** 算法生成一条无碰撞、符合车辆运动学的粗糙路径。
2.  **后处理优化**：使用 DL-IAPS 和 PJSO 算法对路径进行平滑和速度规划，生成高质量的轨迹。

## 1. 改进的混合 A* (Hybrid A*)

针对传统方法存在的计算慢、易绕路等问题，我们引入了以下关键技术：

### 1.1 自适应栅格与多分辨率搜索 (Adaptive Grid & Multi-Resolution)
为了平衡搜索效率与精度，我们采用了双分辨率策略：
*   **粗栅格启发式 (Coarse Grid Heuristic)**：在 **1.0m** 分辨率的降采样地图上运行 2D Dijkstra。这不仅将启发式计算速度提升了数倍（从 400,000 节点降至 4,000 节点），还能提供更平滑的全局引导梯度，避免在空旷区域陷入局部“绕弯”。
*   **精细碰撞检测 (Fine Collision Check)**：在 **0.1m** 分辨率的原始栅格地图上进行车辆轮廓碰撞检测，确保路径的安全性。

### 1.2 自适应步长 (Adaptive Step Size)
算法根据离障碍物的距离动态调整节点扩展的步长：
*   **空旷区域**：使用大步长（1.6x），快速穿越，减少搜索深度和曲折度。
*   **狭窄区域**：使用标准步长，精细搜索以确切避障。

### 1.3 增强启发式与代价函数
*   **Reeds-Shepp Heuristic (Selective)**：仅在接近目标时（<20m）启用精确的 RS 曲线距离计算，兼顾了近距离的姿态调整精度与远距离的搜索速度。
*   **直线偏离惩罚**：显式惩罚偏离目标方向的航向，引导车辆走“直路”。

### 1.4 解析扩展 (Analytic Expansion)
定期尝试使用 Reeds-Shepp 曲线直接连接目标，配合强启发式，使得算法往往能在数十次迭代内即找到可行解。

## 2. 轨迹优化 (Trajectory Optimization)

为了让生成的轨迹更加平滑且舒适，我们引入了基于数值优化的后处理模块 `TrajectoryOptimizer`。

### 2.1 路径平滑 (DL-IAPS)
基于 SCP (Sequential Convex Programming) 的双层循环平滑算法，在安全管道内最小化曲率。

### 2.2 速度规划 (PJSO)
在路径几何确定的基础上，通过 QP 优化生成符合动力学约束的速度与加速度曲线 ($v, a, jerk$)。
